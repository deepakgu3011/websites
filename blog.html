<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blog with Auto VAST Ads</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Video.js CSS -->
<link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f8;
  color:#222;
}

/* HEADER */
header{
  background:#0f172a;
  color:#fff;
  padding:15px 20px;
}

/* BLOG CONTAINER */
.container{
  max-width:900px;
  margin:30px auto;
  padding:20px;
  background:#fff;
  border-radius:8px;
}

.article-title{
  font-size:28px;
}

.meta{
  color:#666;
  font-size:14px;
  margin-bottom:20px;
}

.article-content p{
  line-height:1.7;
  margin-bottom:15px;
}

.article-content ul{
  margin-left:20px;
}

/* VIDEO EMBED */
.blog-video{
  max-width:720px;
  margin:35px auto;
  text-align:center;
}

.video-js{
  width:100% !important;
  height:auto !important;
  aspect-ratio:16 / 9;
  border-radius:10px;
}

/* PLAY BUTTON */
#playBtn{
  padding:12px 25px;
  font-size:16px;
  cursor:pointer;
  margin-bottom:15px;
}
</style>

</head>
<body>

<header>
  <h2>Tech Tutorials Blog</h2>
</header>

<div class="container">

  <h1 class="article-title">How to Apply Voter ID Online</h1>
  <div class="meta">By Tech Tutorials ‚Ä¢ Feb 2026 ‚Ä¢ 5 min read</div>

  <div class="article-content">
    <p>
      Applying for a voter ID card online is a simple and convenient process.
      Citizens can register digitally through official government portals.
    </p>

    <h3>Who Can Apply?</h3>
    <ul>
      <li>Indian citizen</li>
      <li>Age 18+</li>
      <li>Valid address proof</li>
    </ul>

    <!-- üî• VIDEO + VAST ADS -->
    <div class="blog-video">

      <button id="playBtn">‚ñ∂ Play Video</button>

      <video
        id="videoPlayer"
        class="video-js vjs-default-skin vjs-big-play-centered"
        controls
        preload="auto"
        playsinline
        webkit-playsinline>

        <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
      </video>

    </div>

    <p>
      After submission, the application is verified by election authorities.
      Once approved, the voter ID card can be downloaded or delivered.
    </p>

  </div>
</div>

<!-- REQUIRED SCRIPTS -->
<script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
<script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
<script src="https://unpkg.com/videojs-contrib-ads@6/dist/videojs-contrib-ads.min.js"></script>
<script src="https://unpkg.com/videojs-ima@1/dist/videojs.ima.min.js"></script>

<script>
var player = videojs('videoPlayer');

player.ima({
  adTagUrl: "https://fantasticcommunity.com/dem/F.zMdDG/NivMZ/GTUH/YesmK9IuGZ/UBlokGPLTCYe2JNsTzYB2/MjD-gdtuNcj_Yz1lNGj/YMwGO/SWZzsoatWx1ypEdJDK0cxT",
  maxRedirects: 10,
  debug: false
});

/* ==========================
   AUTO ADS BY VIDEO LENGTH
========================== */
function setupAutoAdsByDuration(player) {
  let adSlots = [];
  let played = new Set();

  player.on('loadedmetadata', () => {
    const duration = Math.floor(player.duration());
    let adsCount = 0;

    if (duration >= 600) adsCount = 6;
    else if (duration >= 360) adsCount = 4;
    else if (duration >= 180) adsCount = 2;
    else return;

    const minGap = 40;
    const startAfter = 15;
    const endBefore = 15;

    while (adSlots.length < adsCount) {
      let t = Math.floor(
        Math.random() * (duration - startAfter - endBefore) + startAfter
      );
      if (adSlots.every(x => Math.abs(x - t) >= minGap)) {
        adSlots.push(t);
      }
    }

    adSlots.sort((a, b) => a - b);
    console.log("MIDROLL SLOTS:", adSlots);
  });

  player.on('timeupdate', () => {
    const now = Math.floor(player.currentTime());

    adSlots.forEach(t => {
      if (!played.has(t) && now >= t && !player.ads.isInAdMode()) {
        played.add(t);

        player.ads.startLinearAdMode();
        player.ima.initializeAdDisplayContainer();
        player.ima.requestAds();
      }
    });
  });

  player.on('adend', () => {
    player.ads.endLinearAdMode();
    player.play();
  });

  player.on('adserror', () => {
    player.ads.endLinearAdMode();
    player.play();
  });
}

/* ==========================
   PLAY BUTTON
========================== */
document.getElementById("playBtn").addEventListener("click", function () {

  player.ima.initializeAdDisplayContainer();
  player.ima.requestAds();   // preroll
  player.play();

  setupAutoAdsByDuration(player);
});
</script>

</body>
</html>
    </p>

    <h3>Who Can Apply?</h3>
    <ul>
      <li>Indian citizen</li>
      <li>Age 18+</li>
      <li>Valid address proof</li>
    </ul>

    <!-- üî• EMBEDDED VIDEO WITH VAST -->
    <div class="blog-video-embed">
      <video
        id="blogVastVideo"
        class="video-js vjs-default-skin vjs-big-play-centered"
        controls
        preload="auto"
        playsinline
      >
        <source src="https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4" type="video/mp4">
      </video>
    </div>

    <p>
      Once submitted, your application is verified by the election authorities.
      You can track the status online and download your voter slip once approved.
    </p>

  </div>

</div>

<footer>
  ¬© 2026 Tech Tutorials
</footer>

<!-- VAST / IMA SCRIPT -->
<script>
  const player = videojs('blogVastVideo');

  player.ready(function () {

    player.ima({
      adTagUrl: 'https://fantasticcommunity.com/dXm.F/zzd/GhNdvWZpGfUb/WewmH9AuIZlUjlBkoPLTwYs2DNwTsY/2HMjDGgGt/NgjgYb1xNajUYJwxO/SwZuskamW-1DpddLDs0bxDp',
      timeout: 8000,
      prerollTimeout: 8000,
      debug: false   // ‚ùó debug false = no scary logs
    });

    player.one('play', function () {
      player.ima.initializeAdDisplayContainer();
      player.ima.requestAds();
    });

    // üî• IMPORTANT: handle ad error safely
    player.on('adserror', function () {
      console.log('VAST no-fill / error ‚Üí playing content');
      player.ima.endAdMode();
      player.play();
    });

  });
</script>


</body>
</html>
