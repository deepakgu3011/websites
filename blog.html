<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blog + VAST (Mobile Safe)</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f8;
  color:#222;
}

header{
  background:#0f172a;
  color:#fff;
  padding:15px 20px;
}

.container{
  max-width:900px;
  margin:30px auto;
  padding:20px;
  background:#fff;
  border-radius:8px;
}

.article-title{
  font-size:28px;
}

.meta{
  color:#666;
  font-size:14px;
  margin-bottom:20px;
}

.article-content p{
  line-height:1.7;
  margin-bottom:15px;
}

.blog-video{
  max-width:720px;
  margin:35px auto;
}

.video-js{
  width:100% !important;
  height:auto !important;
  aspect-ratio:16 / 9;
  border-radius:10px;
}
</style>
</head>

<body>

<header>
  <h2>Tech Tutorials Blog</h2>
</header>

<div class="container">

  <h1 class="article-title">How to Apply Voter ID Online</h1>
  <div class="meta">By Tech Tutorials • Feb 2026 • 5 min read</div>

  <div class="article-content">
    <p>Applying for a voter ID card online is easy and digital.</p>

    <div class="blog-video">
      <video
        id="videoPlayer"
        class="video-js vjs-default-skin vjs-big-play-centered"
        controls
        preload="metadata"
        playsinline
        webkit-playsinline>

        <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
      </video>
    </div>

    <p>After verification, voter ID can be downloaded online.</p>
  </div>
</div>

<!-- REQUIRED SCRIPTS -->
<script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
<script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
<script src="https://unpkg.com/videojs-contrib-ads@6/dist/videojs-contrib-ads.min.js"></script>
<script src="https://unpkg.com/videojs-ima@1/dist/videojs.ima.min.js"></script>

<script>
var player = videojs('videoPlayer');

/* ==========================
   IMA CONFIG
========================== */
player.ima({
  adTagUrl: "https://fantasticcommunity.com/dem/F.zMdDG/NivMZ/GTUH/YesmK9IuGZ/UBlokGPLTCYe2JNsTzYB2/MjD-gdtuNcj_Yz1lNGj/YMwGO/SWZzsoatWx1ypEdJDK0cxT",
  maxRedirects: 10,
  debug: false
});

/* ==========================
   MOBILE SAFE PREROLL
========================== */
let prerollDone = false;

player.on('play', function () {
  if (!prerollDone) {
    prerollDone = true;

    // MUST be inside user gesture
    player.pause();
    player.ima.initializeAdDisplayContainer();
    player.ima.requestAds();
  }
});

/* ==========================
   FAILSAFE
========================== */
player.on('adserror', function () {
  player.play();
});

player.on('adend', function () {
  player.play();
});
</script>

</body>
</html>
  </div>
</div>

<!-- REQUIRED SCRIPTS -->
<script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
<script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
<script src="https://unpkg.com/videojs-contrib-ads@6/dist/videojs-contrib-ads.min.js"></script>
<script src="https://unpkg.com/videojs-ima@1/dist/videojs.ima.min.js"></script>

<script>
var player = videojs('videoPlayer');

/* ==========================
   IMA SETUP
========================== */
player.ima({
  adTagUrl: "https://fantasticcommunity.com/dem/F.zMdDG/NivMZ/GTUH/YesmK9IuGZ/UBlokGPLTCYe2JNsTzYB2/MjD-gdtuNcj_Yz1lNGj/YMwGO/SWZzsoatWx1ypEdJDK0cxT",
  maxRedirects: 10,
  debug: false
});

/* ==========================
   PRE-ROLL ON USER PLAY
========================== */
player.one('play', function () {
  player.ima.initializeAdDisplayContainer();
  player.ima.requestAds();
});

/* ==========================
   AUTO MID-ROLL BY DURATION
========================== */
function setupAutoAdsByDuration(player) {
  let adSlots = [];
  let played = new Set();

  player.on('loadedmetadata', () => {
    const duration = Math.floor(player.duration());
    let adsCount = 0;

    if (duration >= 600) adsCount = 6;
    else if (duration >= 360) adsCount = 4;
    else if (duration >= 180) adsCount = 2;
    else return;

    const minGap = 40;
    const startAfter = 15;
    const endBefore = 15;

    while (adSlots.length < adsCount) {
      let t = Math.floor(
        Math.random() * (duration - startAfter - endBefore) + startAfter
      );
      if (adSlots.every(x => Math.abs(x - t) >= minGap)) {
        adSlots.push(t);
      }
    }

    adSlots.sort((a, b) => a - b);
  });

  player.on('timeupdate', () => {
    const now = Math.floor(player.currentTime());

    adSlots.forEach(t => {
      if (!played.has(t) && now >= t && !player.ads.isInAdMode()) {
        played.add(t);
        triggerAd();
      }
    });
  });
}

/* ==========================
   SEEK-BASED ADS (3+ SEEKS)
========================== */
let seekCount = 0;
let seekAdTriggered = false;

player.on('seeked', function () {
  seekCount++;

  if (seekCount >= 3 && !seekAdTriggered && !player.ads.isInAdMode()) {
    seekAdTriggered = true;
    triggerAd();
  }
});

/* ==========================
   AD TRIGGER SAFE FUNCTION
========================== */
function triggerAd(){
  player.ads.startLinearAdMode();
  player.ima.initializeAdDisplayContainer();
  player.ima.requestAds();
}

/* ==========================
   AD END / ERROR
========================== */
player.on('adend', function () {
  player.ads.endLinearAdMode();
  player.play();
});

player.on('adserror', function () {
  player.ads.endLinearAdMode();
  player.play();
});

setupAutoAdsByDuration(player);
</script>

</body>
</html>
